<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2024-01-08T09:39:15.527394418"><meta name="build-number" content="${buildNumber}">       <title>Software Quality | PORTFOLIO S3</title><script id="virtual-toc-data" type="application/json">[{"id":"frontend","level":0,"title":"Frontend","anchor":"#frontend"},{"id":"backend-api","level":0,"title":"Backend (API)","anchor":"#backend-api"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Software Quality | PORTFOLIO S3"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="PORTFOLIO S3 Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="2-software-quality.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Software Quality | PORTFOLIO S3"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "2-software-quality.html#webpage", "url": "2-software-quality.html", "name": "Software Quality | PORTFOLIO S3", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "/#website", "url": "/", "name": "PORTFOLIO S3 Help" }</script><!-- End Schema.org --></head>      <body data-id="2_Software_Quality" data-main-title="Software Quality" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Learning Outcomes"  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>PORTFOLIO S3  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="2_Software_Quality"   id="2_Software_Quality.md">Software Quality</h1>  <aside class="prompt" data-type="tip" data-title="" id="86ec1495_517"><p id="86ec1495_518"><span class="control" id="86ec1495_519">Learning outcome:</span></p><p id="86ec1495_520">You use software tooling and methodology that continuously monitors and improve the software quality during software development.</p><p id="86ec1495_521"><span class="control" id="86ec1495_522">Clarification:</span></p><p id="86ec1495_523"><span class="control" id="86ec1495_524">Tooling and methodology:</span> Carry out, monitor and report on unit integration, regression and system tests, with attention for security and performance aspects, as well as applying static code analysis and code reviews.</p></aside><section class="chapter"><h2 id="frontend" data-toc="frontend"   >Frontend</h2><section class="chapter"><h3 id="cypress" data-toc="cypress"   >Cypress</h3><p id="86ec1495_525">For maintaining the software quality, I have set up an End-To-End test in Next.js with <a href="https://docs.cypress.io/guides/overview/why-cypress" id="86ec1495_526"   data-external="true" rel="noopener noreferrer" >Cypress</a>. The reason i chose Cypress because its easy to test the code for multiple browsers (such as firefox and chrome), and it is also possible to integrate this into a gitlab pipeline.</p><p id="86ec1495_527">By monitoring if the End-To-End tests still return OK, I can ensure that the code still works / doesn't work</p><section class="chapter"><h4 id="cypress-in-action" data-toc="cypress-in-action"   >cypress in action</h4><figure data-theme="light" id="86ec1495_528" width="1917" ><img alt="Cypress" class="js-gif article__bordered-element" data-gif-src="images/cypress.gif" width="1917"  style="width: 1917px;"></figure></section><section class="chapter"><h4 id="partial-code-behind-cypress" data-toc="partial-code-behind-cypress"   >(partial) code behind cypress</h4><p id="86ec1495_529">The following code describes some basic login actions. the first <code class="code" id="86ec1495_530">it</code> fills out the login form and click on <code class="code" id="86ec1495_531">login</code>. as a check if the User is authenticated, I added a should operation to check if the string <code class="code" id="86ec1495_532">Hello string</code> (<code class="code" id="86ec1495_533">Hello &lt;username&gt;</code>) gets found.</p><p id="86ec1495_534">The second <code class="code" id="86ec1495_535">it</code> operation also fills out the login form with data but the credentials do not exist in my database so the website <code class="code" id="86ec1495_536">should</code> return <code class="code" id="86ec1495_537">Login failed</code></p><figure  id="86ec1495_538"><img alt="Cypresslogin" src="images/cypresslogin.png" title="Cypresslogin"  width="1608" height="1280"></figure></section></section></section><section class="chapter"><h2 id="backend-api" data-toc="backend-api"   >Backend (API)</h2><p id="86ec1495_539">I am making these tests because I want to know if the API is ready for deployment. For testing the general use of the application i have chosen for <span class="control" id="86ec1495_540">Integration Tests</span>, And for some more specific testing i've chosen to run some UnitTests.</p><section class="chapter"><h3 id="integration-tests-wip" data-toc="integration-tests-wip"   >Integration Tests (WIP)</h3><p id="86ec1495_541">For my backend I have set up some integration Tests regarding testing CRUD functionality.</p><section class="chapter"><h4 id="before-and-after" data-toc="before-and-after"   >before and after</h4><p id="86ec1495_542">I have set up the following <code class="code" id="86ec1495_543">SetUp</code> and <code class="code" id="86ec1495_544">TearDown</code> stage</p><div class="code-block" data-lang="csharp"         >
[SetUp]
public void Setup()
{
    File.Copy(&quot;appsettings.test.json&quot;, &quot;appsettings.json&quot;, true);
    _factory = new WebApplicationFactory&lt;Program&gt;();

    _client = _factory.CreateClient();
}

[TearDown]
public void TearDown()
{
     
    if (_client != null)
    {
        _client.Dispose();
    }

    if (_factory != null)
    {
        _factory.Dispose();
    }
}
</div><p id="86ec1495_546">In the <code class="code" id="86ec1495_547">SetUp</code> I do a few things:</p><ul class="list _ul" id="86ec1495_548"><li class="list__item" id="86ec1495_549"><p>i copy the appsettings.test.json over the appsettings.json file so the integration test uses the test database I have set up.</p></li><li class="list__item" id="86ec1495_550"><p>it creates a webapplicationfactory based on the appsettinsgs.test.json</p></li><li class="list__item" id="86ec1495_551"><p>it creates a client from that webapplicationfactory</p></li></ul><p id="86ec1495_552">the _client gets used throughout the tests to do some web based actions such as executing get,post,update and delete requests.</p><p id="86ec1495_553">In the <code class="code" id="86ec1495_554">TearDown</code> section i basically perform a cleanup so the _client and _factory don't get left dangling when the tests finish. It's a good best practice for making sure that there are no resources dangling somewhere in the system.</p></section><section class="chapter"><h4 id="tests" data-toc="tests"   >Tests</h4><p id="86ec1495_555">here's a sample of what's in my integration test:</p><div class="code-block" data-lang="csharp"         >
[Test]
public async Task GetBoardFromBoardid()
{
    // arrange
    int boardid = 102;
    //act
    var response = await _client.GetAsync($&quot;/Boards/{boardid}&quot;);
    var responsebody = await response.Content.ReadAsStringAsync();
    Board board = JsonConvert.DeserializeObject&lt;Board&gt;(responsebody);
    //assert
    Assert.NotNull(response);
    Assert.That(response.StatusCode, Is.EqualTo(HttpStatusCode.OK));
    Assert.That(board.name, Is.EqualTo(&quot;integration_test&quot;));
}
</div><p id="86ec1495_557">In that example i execute a simple GET request to the <code class="code" id="86ec1495_558">/Boards/{boardid}</code> endpoint of my API. Then I read the body of the response and put that in a variable. For actually testing if the data that gets returned is correct i check that</p><ul class="list _ul" id="86ec1495_559"><li class="list__item" id="86ec1495_560"><p>That response is not null</p></li><li class="list__item" id="86ec1495_561"><p>That the response statuscode returns statuscode OK (200)</p></li><li class="list__item" id="86ec1495_562"><p>That the correct board gets returned</p></li></ul><p id="86ec1495_563">here Follows an integration test regarding testing the output of the API:</p><div class="code-block" data-lang="csharp"         >
[Test]
public async Task CreateBoardFromUserid_NoUserIdGiven()
{
    string boardname = &quot;ThisGetsNeverAdded&quot;;

    var response = await _client.PostAsync($&quot;/Boards?name={boardname}?userid=&quot;, null);
    
    Assert.That(response.StatusCode, Is.EqualTo(HttpStatusCode.BadRequest));
}
</div><p id="86ec1495_565">In the codeblock above it executes a POST request to <code class="code" id="86ec1495_566">/Boards</code> with the following parameters: <code class="code" id="86ec1495_567">?name={boardname}?userid=</code>. The Test will perform the following check</p><ul class="list _ul" id="86ec1495_568"><li class="list__item" id="86ec1495_569"><p>It checks that the response.statuscode is equual to <code class="code" id="86ec1495_570">badrequest</code>.</p></li></ul></section></section><section class="chapter"><h3 id="unit-tests-wip" data-toc="unit-tests-wip"   >unit Tests (WIP)</h3><p id="86ec1495_571">for now i only have 1 UnitTest for trying to retrieve a user in the Data Access Layer (DAL).</p><section class="chapter"><h4 id="before" data-toc="before"   >before</h4><p id="86ec1495_572">I have created the following <code class="code" id="86ec1495_573">SetUp</code> stage:</p><div class="code-block" data-lang="csharp"         >
using DALTest;
private IUserDal _testdal { get; set; }
    [SetUp]
    public void SetUp()
    {
        _testdal = new UserDal();
    }
</div><p id="86ec1495_575">in This stage I set up the Data Access layer for the unit tests that get executed. On the very first line I call the <code class="code" id="86ec1495_576">DALTest</code> library I made. This library contains some static data that emulates a real database.</p></section><section class="chapter"><h4 id="unit-tests" data-toc="unit-tests"   >unit tests</h4><p id="86ec1495_577">Here follows a test for trying to retrieve a user in the database</p><div class="code-block" data-lang="csharp"         >
[Test]
public void RegisterTest_AlreadyExists()
{
    var usercollection = new UserCollection(_testdal);
    bool created = usercollection.Register(&quot;rose&quot;, &quot;van Leeuwen&quot;, &quot;string&quot;, &quot;Rose@mail.com&quot;, &quot;Rose&quot;);
    Assert.That(created , Is.EqualTo(false));
}
</div><p id="86ec1495_579">In this Test I've set up the usercollection with the testdal, so it retrieves data from the simulated database. Then I actually execute the <code class="code" id="86ec1495_580">.Register</code> method for trying to create a user I check the following</p><ul class="list _ul" id="86ec1495_581"><li class="list__item" id="86ec1495_582"><p>That the created variable is set to false.</p></li></ul><p id="86ec1495_583"><span class="control" id="86ec1495_584">how many unit tests am i going to make?</span></p><p id="86ec1495_585">I will not be making many unit tests because I hardly have any methods that <span class="emphasis" id="86ec1495_586">do</span> things. The methods that i have only retrieve things from the database. The Method I can test is my password encryption and decryption. here follows 2 unit tests regarding checking if the password is correct based on the user credentials:</p><p id="86ec1495_587"><span class="control" id="86ec1495_588">UnitTests\UserTests.cs</span></p><div class="code-block" data-lang="csharp"         >
[Test]
 public void CheckPassword_correct()
  {
      User user = new User(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;Rose&quot;, &quot;string&quot;, _testdal);
      bool PasswordIsCorrect = user.CheckPassword(&quot;string&quot;);
      Assert.That(PasswordIsCorrect, Is.EqualTo(true));
  }
[Test]
  public void CheckPassowrd_Incorrect()
  {
      User user = new User(&quot;Rose&quot;, &quot;van Leeuwen&quot;, &quot;Mail@mail.com&quot;, &quot;Rose&quot;, &quot;string&quot;, _testdal);
      bool PasswordIsCorrect = user.CheckPassword(&quot;SomeRandomInorrectPassword&quot;);
      Assert.That(PasswordIsCorrect, Is.EqualTo(false));
  }
</div><p id="86ec1495_590"><span class="control" id="86ec1495_591">Logic\User.cs</span></p><div class="code-block" data-lang="csharp"         >
public bool CheckPassword(string Password)
{
    try
    {
        UserDTO userDTO = UserDal.GetUser(Username);
        User user = userDTO.ConvertToLogic();
        string password = user.B64Decode();
        if (password != null)
        {
            if (password == Password)
            {
                return true;
            }
            return false;
        }
        return false;
    }
    catch (Exception ex)
    {
        return false;
    }
}
private string B64Decode()
{
    byte[] data = Convert.FromBase64String(Passhash);
    string DecodedString = Encoding.UTF8.GetString(data);
    return DecodedString;
}
</div><p id="86ec1495_593"><span class="control" id="86ec1495_594">DALTest\UserDal.cs</span></p><div class="code-block" data-lang="csharp"         >
public class UserDal : IUserDal
{
    public UserDTO GetUser(string username)
    {
        if (username == &quot;Rose&quot;)
        {
            return new UserDTO(0,&quot;Rose&quot;, &quot;van Leeuwen&quot;, &quot;Rose@mail.com&quot;, &quot;Rose&quot;, &quot;c3RyaW5n&quot;);
        }
        return null;
    }
}   
</div><p id="86ec1495_596">In the code snippets above you'll see that I have created 2 unit tests and I have provided some context regarding the testDAL and the actual method that is being tested.</p><p id="86ec1495_597">the first Unit test checks if the given <code class="code" id="86ec1495_598">User</code> has the correct credentials. It does this by passing a password in the <code class="code" id="86ec1495_599">CheckPassword()</code> method. This function tries to get the user from the given DAL (<code class="code" id="86ec1495_600">DALTest\UserDal.cs</code>). and on successfull retrieval of the user it'll check if the password is correct by decoding the password that was retrieved from the 'database' and checking if the given password from the user is the same as the decoded password.</p><p id="86ec1495_601">the second test does the same thing as the first test but the given password is incorrect so the test should return false</p><p id="86ec1495_602">here are the results:</p><figure  id="86ec1495_603"><img alt="unittest_result.png" src="images/unittest_result.png" title="unittest_result.png"  width="409" height="113"></figure></section></section><section class="chapter"><h3 id="jetbrains-qodana-not-used" data-toc="jetbrains-qodana-not-used"   >Jetbrains Qodana (NOT USED)</h3><section class="chapter"><h4 id="not-used" data-toc="not-used"   >Not Used?</h4><p id="86ec1495_604">The reason that I am not going to use this software is because there were licensing issues. So I'm not going to use this software anymore. In the next heading you'll see the software I used to scan my code</p></section><section class="chapter"><h4 id="why-qodana" data-toc="why-qodana"   >why Qodana?</h4><p id="86ec1495_605">Qodana performs static code analysis, which means it analyzes the source code without executing the program. It can detect a wide range of issues, such as code smells, potential bugs, security vulnerabilities, and adherence to coding standards. By identifying these issues early in the development process, developers can write cleaner, more maintainable code.</p><p id="86ec1495_606">One of the notable features of Qodana is its integration with JetBrains IDEs, allowing developers to run code quality checks directly from the IDE interface. This tight integration simplifies the workflow for developers, making it easier to address code quality issues promptly.</p><p id="86ec1495_607"><span class="emphasis" id="86ec1495_608">this is not going to be implemented</span></p></section></section><section class="chapter"><h3 id="sonarcloud" data-toc="sonarcloud"   >Sonarcloud</h3><p id="86ec1495_609">I've chosen for Sonarcloud to perform some software quality checks.</p><section class="chapter"><h4 id="why-a-code-analysis-service" data-toc="why-a-code-analysis-service"   >Why a code analysis service</h4><p id="86ec1495_610">These services are handy for setting up coding conventions and checking if there are any bugs in the code that someone wrote. These Services can be particularly usefull for a group of developers. Every Developer has their own way of writing their code, so by setting up a service that checks if the code is maintainable / readable, you restrict the possibilities of ending up with source codes that looks different in every file you open.</p></section><section class="chapter"><h4 id="why-sonarcloud" data-toc="why-sonarcloud"   >Why Sonarcloud?</h4><p id="86ec1495_611">Sonarcloud has the same feature as Jetbrains Qodana: code smells, Reliability checks, security checks, code coverage, maintainablility and duplicate lines check.</p><p id="86ec1495_612">i have provided an image of what my first software quality check is</p><figure  id="86ec1495_613"><img alt="sonarcloud" src="images/sonarcloud.png" title="sonarcloud"  width="1919" height="893"></figure><p id="86ec1495_614">you'll see that the security rating an E(lowest rating) is. this is because I wrote a connectionstring including the password in a file in plain text. Sonar doesn't really like that :p</p><p id="86ec1495_615">You'll see in the image below that i have fixed 1 code smells error:</p><figure  id="86ec1495_616"><img alt="codesmellsfix.png" src="images/codesmellsfix.png" title="codesmellsfix.png"  width="1919" height="893"></figure><p id="86ec1495_617">The fix was:</p></section></section></section><div class="last-modified"> Last modified: 08 January 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="5-cultural-differences-and-ethics.html">Cultural differences and ethics</a>   </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script></body></html>